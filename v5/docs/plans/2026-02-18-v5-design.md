# OpenVibe V5 — Design Document

> **Status:** Prototype — direction, not specification.
> **Date:** 2026-02-18

---

## Overview

V5 evolves OpenVibe from a single-tenant dogfood project into a multi-tenant platform with two concrete customers:

- **Vibe Inc** — real company using the platform to boost GTM and product development efficiency
- **Astrocrest** — OpenVibe's own operating intelligence; the system that scans markets, creates companies, and manages their lifecycles

V4 (vibe-ai-adoption) is fully frozen. V5 starts fresh, building on V4's packages and learnings.

---

## 1. Structure & Housekeeping

### Root Files (simplified)

| File | Role | Target Length |
|------|------|---------------|
| `README.md` | Navigation aid — what OpenVibe is, current version, quick links | ~50 lines |
| `CLAUDE.md` | Session protocol — 3-step resume, constraints, design principles | ~40 lines |
| `PROGRESS.md` | Current state only — phase, package table, 3-4 doc pointers | ~25 lines |

Root files are navigation aids, not documentation. All detail lives in `v5/docs/`.

### Directory Layout

```
openvibe/
├── v1/  v2/  v3/  v4/   # all archived and frozen
└── v5/
    ├── docs/
    │   ├── THESIS.md            # updated for two-customer model
    │   ├── DESIGN.md            # multi-tenant architecture
    │   ├── ROADMAP.md           # V5 phased plan
    │   └── strategy/
    │       ├── ASTROCREST.md    # principles + philosophy
    │       └── OS-MODEL.md      # refined from V4
    ├── openvibe-sdk/            # v1.0.0
    ├── openvibe-runtime/        # v1.0.0
    ├── openvibe-platform/       # v1.0.0
    ├── openvibe-cli/            # v1.0.0
    ├── vibe-inc/                # Customer 1
    └── astrocrest/              # Customer 2
```

V4 packages are copied into `v5/` as starting points. V4 itself is untouched.

---

## 2. Platform Architecture

### Core Shift: Role SDK as Foundation

V5 designs from the **Role SDK** down, not from operators up. Everything is a Role first.

```
Role (SDK primitive)
├── Identity (SOUL)
├── Memory (working → episodic → semantic)
├── Authority (L1–L4 trust levels)
└── Capabilities (workflows, tools, templates)

Workspace
├── System Roles   (SDK built-in, always present)
└── User Roles     (instantiated from Templates)
```

### System Roles (inside SDK, auto-present in every workspace)

| Role | Function |
|------|----------|
| `Coordinator` | Routes tasks, manages approvals, escalation |
| `Archivist` | Manages memory, knowledge base, episodic retention |
| `Auditor` | Tracks deliverables, metrics, feedback loop |

### Templates

Pre-built Role configurations (SOUL + capabilities) that tenants instantiate and customize. Lives in `v5/openvibe-sdk/templates/`.

```
templates/
├── gtm/
│   ├── content-role.yaml
│   ├── revenue-role.yaml
│   ├── customer-success-role.yaml
│   └── market-intelligence-role.yaml
├── product-dev/
│   ├── product-ops-role.yaml
│   ├── engineering-ops-role.yaml
│   └── qa-role.yaml
└── research/
    ├── market-scan-role.yaml
    └── company-lifecycle-role.yaml
```

### Multi-tenancy

Two isolated tenants via separate data directories. Declared at startup:

```yaml
# openvibe-platform/config/tenants.yaml
tenants:
  - id: vibe-inc
    name: Vibe Inc
    data_dir: data/vibe-inc/
  - id: astrocrest
    name: Astrocrest
    data_dir: data/astrocrest/
```

Routes become tenant-scoped:
```
/tenants/{id}/workspaces
/tenants/{id}/roles
/tenants/{id}/approvals
/tenants/{id}/deliverables
```

Each tenant gets its own `JSONFileStore` instance. No data bleeds across tenants.

### Package Versions

| Package | V4 | V5 | Key Change |
|---------|----|----|------------|
| openvibe-sdk | v0.3.0 | v1.0.0 | System roles + Template registry + `TenantContext` |
| openvibe-runtime | v0.1.0 | v1.0.0 | Tenant context through LangGraph execution |
| openvibe-platform | v0.1.0 | v1.0.0 | Tenant-scoped routes + tenant registry |
| openvibe-cli | v0.1.0 | v1.0.0 | `--tenant` flag |

**Not changing yet:** auth, cloud deployment, UI dashboard, billing — YAGNI.

---

## 3. Vibe Inc

### Two Pillars

1. **GTM** — 4 roles migrated from V4 (redesigned from Role SDK perspective)
2. **Product Dev** — 3 new roles

### GTM Roles

| Role | Core Function |
|------|---------------|
| Revenue | Lead qualification, scoring, nurture |
| Content | Segment research, content generation, distribution |
| Customer Success | Onboarding, health monitoring, expansion |
| Market Intelligence | Funnel tracking, deal risk, conversation analysis |

### Product Dev Roles (new)

| Role | Core Function |
|------|---------------|
| Product Ops | Feature intake → prioritization → specs → tickets |
| Engineering Ops | PR review → tech debt signals → release notes |
| QA | Test case generation → regression planning |

All roles instantiated from templates, customized with Vibe-specific SOUL config.

### Notes

- Role internals (workflows, nodes) to be refined in implementation planning
- Migration from V4 vibe-ai-adoption operators happens in implementation, not design

---

## 4. Astrocrest

### What It Is

Astrocrest is OpenVibe's own operating intelligence — the OS running itself. Not a client. It decides where to enter markets, creates companies, and manages their lifecycles. The AI-Berkshire logic, implemented as a tenant.

### First Artifact: ASTROCREST.md

Before any code, define Astrocrest's identity:
- **Primary metric:** flywheel density (word-of-mouth velocity)
- **Investment stance:** self-owned (AI deliverability >70%) vs JV (regulatory/complexity barrier)
- **Decision framework:** 5-dimension scoring model
- **Kill signals:** per lifecycle stage — when to pivot vs exit

### Company Lifecycle

```
Scan → Score → Create → Launch → Monitor → Exit / Scale
```

| Stage | What Happens |
|-------|--------------|
| Scan | Identify candidate sub-segments from market data |
| Score | 5-dimension scoring, ranked shortlist |
| Create | Brand defined, service packaged, SOUL configured |
| Launch | First customer acquired, flywheel seeded |
| Monitor | Health metrics tracked, pivot signals watched |
| Exit/Scale | Kill signal → exit; flywheel confirmed → scale |

### Roles

**Market Research:**

| Role | Function |
|------|----------|
| Market Scanner | Sub-segment identification + 5D scoring |
| Competitive Intel | Competitor tracking in target sub-segments |
| Signal Monitor | Market shifts, new entrants, regulatory changes |

**Company Lifecycle:**

| Role | Function |
|------|----------|
| Incubator | Brand creation, service definition, first customer playbook |
| Health Monitor | Flywheel metrics, NRR, word-of-mouth rate, churn |
| Portfolio Manager | Meta-decisions across all companies — enter, pivot, exit |

### Key Data Models

- `SubSegment` — scored market opportunity
- `Brand` — a company created to serve a sub-segment
- `Company` — live company with lifecycle stage + health metrics
- `FlyWheelMetric` — word-of-mouth rate, NRR, client retention, cohort data

### Structure

```
v5/astrocrest/
├── docs/
│   ├── ASTROCREST.md          # principles + philosophy (first artifact)
│   └── INCUBATION-LOGIC.md    # lifecycle stages + decision rules
├── roles/
│   ├── market-scanner/
│   ├── competitive-intel/
│   ├── signal-monitor/
│   ├── incubator/
│   ├── health-monitor/
│   └── portfolio-manager/
└── config/
    ├── soul.yaml              # Astrocrest identity
    └── scoring.yaml           # 5-dimension framework config
```

---

## Layered Execution Plan

| Layer | What | Parallel? |
|-------|------|-----------|
| 0 | Housekeeping — restructure root files, freeze V4, scaffold V5 | No |
| 1 | Platform multi-tenancy — SDK v1.0.0, tenant-scoped platform | No |
| 2 | Strategy artifacts — ASTROCREST.md + Vibe Inc role design | Yes |
| 3 | Systems — Astrocrest roles + Vibe Inc product dev roles | Yes |
